(function(d,c){d.Controller.include({isActive:function(){return this.active},activate:function(){this.active=!0;this.el.removeClass("hidden")},deactivate:function(){this.active=!1;this.el.addClass("hidden")}});d.ControllerWithManager=d.Controller.create({managed_controllers:[],active_controller:null,manage:function(){this.managed_controllers=arguments=Array.prototype.slice.call(arguments,0)},activateController:function(a){a=a?a:null;if(null!=a){if(0>this.managed_controllers.indexOf(a))throw"There's no controller `"+
a+"` being managed.";if(this[a].isActive())return}var b=this;_.each(this.managed_controllers,function(e){e==a?b[e].activate():b[e].deactivate()});this.active_controller=a},deactivateAll:function(){this.activateController(null)}})})(Spine,Spine.$);(function(d,c){window.TorrentItem=d.Controller.create({status_classes:"paused waiting checking downloading seeding done stopped error",init:function(){this.el=c('<div class="torrent" id="" data-label="" data-hash="" />');this.item.bind("update",this.proxy(this.render));this.item.bind("destroy",this.proxy(this.remove))},render:function(a){a&&(this.item=a);a=this.el.hasClass("slided");if(!a){var b=this.el.hasClass("selected"),e=this.el.hasClass("hidden");this.el.html(App.torrents.torrent_template(this.item)).removeClass(this.status_classes).addClass(this.item._torrent_class).attr("id",
"torrent_"+this.item.id).attr("data-percent",this.item.percent).attr("data-hash",this.item.id).attr("data-label",this.item.label);b&&(d.trigger("updateControls",this.item,"torrent"),d.trigger("updatePanel",this.item));this.el.toggleClass("selected",b).toggleClass("slided",a).toggleClass("hidden",e)}return this},remove:function(){this.el.remove()}});window.Torrents=d.Controller.create({events:{"swipeleft .torrent":"swiped","swiperight .torrent":"swiped","tap .torrent":"selected","tap .sub_labels a":"setLabel",
"tap .behind .labels":"showLabels","tap .behind .send_action":"sendAction","tap .behind a":"behindClick",tap:"deselectAll"},default_interval:3E3,interval:3E3,init:function(){this.filter_more=this.first_load=!1;this.content=this.el.find(".content:first");this.target_torrent=c('[data-target="torrent"]');this.total_download=c("#total_download");this.total_upload=c("#total_upload");this.labels_container=c("#sidebar").find(".labels > ul:first");this.torrents_filter_container=c("#sidebar").find(".torrents > ul:first");
d.bind("filterTorrents",this.proxy(this.filterList));d.bind("refreshAll",this.proxy(this.refreshAll));d.bind("setIntervals",this.proxy(this.setIntervals));Torrent.bind("refresh",this.proxy(this.addAll));Torrent.bind("create",this.proxy(this.addOne));this.torrent_template=Handlebars.compile(c("#tmpl_torrent").html());this.labels_template=Handlebars.compile(c("#tmpl_label").html());this.labels_menu_template=Handlebars.compile(c("#tmpl_labels_menu").html())},setIntervals:function(a){this.default_interval=
this.interval=1*a},activate:function(){this.active=!0;this.el.removeClass("hidden")},deactivate:function(){this.active=!1;this.deselectAll(!0);this.el.addClass("hidden");d.trigger("deactivatePanels")},afterUpdate:function(){var a=this;this.updateInterval=setTimeout(function(){a.refreshAll()},this.interval);this.refreshTotals();this.refreshSidebarCount();0>=Torrent.count()&&this.content.html('<div class="list_message"><p>Torrent list empty.</p></div>');uTorrentApp.prototype.loadString("text",["ML_LABEL",
"share","OV_CAT_NOLABEL"])},loadAll:function(){this.first_load=!0;var a=this;this.el.addClass("loading");client.raptor.api.post({list:1},{},function(b){c("#all_content").addClass("content_loaded");a.content.html("");a.torrentc=b.torrentc;_.each(b.torrents,function(a){Torrent.smartInit(a).save()});a.processLabels(b.label,Torrent.count());d.trigger("processFeeds",b.rssfeeds);a.afterUpdate();a.el.removeClass("loading")},function(){a.interval*=1.5;a.updateInterval=setTimeout(function(){a.refreshAll()},
a.interval)})},refreshAll:function(a,b){if(!this.torrentc)return!1;"remove"==a&&(c("#torrent_"+b).hide(),d.trigger("updateControls"));var e=this;clearInterval(this.updateInterval);client.raptor.api.post({list:1,cid:this.torrentc,action:a,hash:b},{},function(a){e.interval=e.default_interval||3E3;e.torrentc=a.torrentc;e.processLabels(a.label,Torrent.count());a.torrentp&&0<a.torrentp.length&&_.each(a.torrentp,function(a){a=Torrent.processAttributes(a);var b;Torrent.exists(a.id)?(b=Torrent.find(a.id),
b.updateAttributes(a)):(b=Torrent.init(a),b.save())});a.torrentm&&0<a.torrentm.length&&_.each(a.torrentm,function(a){Torrent.destroy(a)});d.trigger("processFeeds",a.rssfeedp,a.rssfeedm);e.filterList();e.afterUpdate()},function(){e.interval*=1.5;e.updateInterval=setTimeout(function(){e.refreshAll()},e.interval)})},filterList:function(a,b,e){a=a||this.filter_selector;b=void 0===b?this.filter_more:b;this.content.children(".hidden").removeClass("hidden");b&&this.content.children(a).removeClass("slided").addClass("hidden");
e&&window.scrollability&&window.scrollability.scrollTo(this.content[0],0,0,0);this.filter_selector=a;this.filter_more=b},refreshTotals:function(){var a=0,b=0;Torrent.each(function(e){a+=e.up_speed||0;b+=e.down_speed||0});this.total_download.html(App.parseBytes(b));this.total_upload.html(App.parseBytes(a))},refreshSidebarCount:function(){var a=this;this.torrents_filter_container.find("a").each(function(){var b=c(this).data("show"),b=a.content.children(b?b:null).length,e=c(this).find(".count");b?e.text(b).removeClass("hidden"):
e.addClass("hidden")})},processLabels:function(a,b){var e=this;if(!_.isEqual(a,this.labels)){var c="",g=this.labels_container.find(".current").data("label");_.each(a,function(a){c+=e.labels_template({name:a[0],count:a[1],show_count:!0,current:g==a[0]});b-=parseInt(a[1])});c=e.labels_template({no_label:!0,count:b,show_count:!0})+c;this.labels=a;this.labels_container.html(c)}},addAll:function(){Torrent.each(this.addOne)},addOne:function(a){a=TorrentItem.init({item:a}).render().el;1==Torrent.count()&&
this.content.html("");this.content.append(a)},showLabels:function(a){a.preventDefault();a=c(a.currentTarget);var b=a.siblings(".sub_labels"),e=[],f=b.data("current");b.hasClass("hidden")?(b.toggleClass("on_bottom",225>a.offset().top),_.each(this.labels,function(a){var b=a[0]==f;e.push({name:a[0],current:b,label:b?"":a[0]})}),b.html(this.labels_menu_template({labels:e})).removeClass("hidden")):b.addClass("hidden")},setLabel:function(a){a.preventDefault();var b=c(a.currentTarget);a=b.closest(".torrent");
var e=a.find(".sub_labels"),b=b.data("label");switch(b){case "_new":b=prompt(locale("OV_NEWLABEL_TEXT"))}e.addClass("hidden");null!==b&&a.attr("data-label",b);a.removeClass("slided");null!==b&&client.raptor.api.post({action:"setprops",s:"label",hash:a.data("hash"),v:b})},sendAction:function(a){a.preventDefault();a=c(a.currentTarget);var b=a.closest(".torrent");d.trigger("refreshAll",a.data("action"),b.data("hash"));b.removeClass("slided")},behindClick:function(a){a.stopImmediatePropagation()},swiped:function(a){c(".slided",
this.el).not(a.currentTarget).removeClass("slided");c(a.currentTarget).toggleClass("slided").find(".sub_labels").addClass("hidden")},deselectAll:function(a){c("#search").blur();if(!0===a||this.el.get(0).id==a.target.id)c(this.el).find(".selected").removeClass("selected"),this.target_torrent.addClass("disabled"),d.trigger("closePanels"),this.current=""},selected:function(a){a.preventDefault();a=c(a.currentTarget);a.hasClass("slided")||(c(this.el).find(".selected, .slided").removeClass("selected slided"),
a.addClass("selected"),this.target_torrent.removeClass("disabled"),this.current=a.data("hash"),a=Torrent.find(this.current),d.trigger("updatePanel",a,!0),d.trigger("updateControls",a,"torrent"),d.trigger("updatePlayer",a,!0))}})})(Spine,Spine.$);(function(d,c){window.Controls=d.Controller.create({events:{"tap .buttons a":"buttonClicked","tap .popover > a":"popover","tap #app_title":"goHome","tap #options_toggle":"toggleSettings","tap #user_logout":"logoutUser"},init:function(){c("#search",this.el).bind("focus",this.proxy(this.searchFocused));c("#search",this.el).bind("blur",this.proxy(this.searchBlurred));this.target_torrent=c('[data-target="torrent"]');var a=this;d.bind("closeModals",this.proxy(function(){a.togglePopover(!1)}));d.bind("updateControls",
this.proxy(this.updateControls))},logoutUser:function(a){a.preventDefault();if(!b||!_.isString(b))var b=null;d.trigger("logoutUser",b)},toggleSettings:function(a){a.preventDefault();c("#body").removeClass("showmenu");d.trigger("toggleSettings")},goHome:function(a){a.preventDefault();c("#sidebar a:first").trigger("tap")},updateControls:function(a,b){if(a){var e=this.el.find(".controls_content:first");e.find('.buttons a:not([data-target="'+b+'"])').filter(':not([data-target="all"])').addClass("hidden");
e.find('.buttons a[data-target="'+b+'"]').removeClass("hidden disabled");0<=a._torrent_class.indexOf("waiting")?e.find('a[data-action="pause"], a[data-action="start"]').addClass("hidden"):0<=a._torrent_class.indexOf("paused")||0<=a._torrent_class.indexOf("stopped")?e.find('a[data-action="pause"], a[data-action="forcestart"]').addClass("hidden"):0<=a._torrent_class.indexOf("done")?e.find('a[data-action="pause"], a[data-action="forcestart"]').addClass("hidden"):e.find('a[data-action="forcestart"], a[data-action="start"]').addClass("hidden");
1>=a.queue_position&&e.find('a[data-action="queueup"]').addClass("disabled")}else this.target_torrent.addClass("disabled")},popover:function(a){a.preventDefault();c(a.currentTarget).closest(".popover").hasClass("open")||d.trigger("closeModals");this.togglePopover()},togglePopover:function(a){this.el.find(".popover").toggleClass("open",a)},buttonClicked:function(a){a.preventDefault();a=c(a.currentTarget);var b=a.data("action");if("torrent"==a.data("target")&&b)("remove"!=b||confirm("Are you sure you want to remove this torrent?"))&&
d.trigger("refreshAll",b,App.getSelected());else if("all"==a.data("target")&&b)switch(b){case "showmenu":c("#body").toggleClass("showmenu")}},searchFocused:function(a){c(this.el).addClass("search_focused")},searchBlurred:function(a){c(this.el).removeClass("search_focused")}})})(Spine,$);(function(d,c){window.Settings=d.Controller.create({elements:{"#top_settings":"top_element","#menu_settings":"menu_element","#inner_settings":"inner_menu_element",".title":"title_element",".title .text":"title_text_element"},events:{"tap #menu_settings a":"setCurrent","swipe .switch":"emulateChange","tap .go_back":"returnMenu","change #inner_settings input":"optionChanged","change #inner_settings textarea":"optionChanged","change #inner_settings select":"optionChanged","tap #inner_settings a":"optionChanged"},
init:function(){this.active=this.first_load=!1;this.settings={};this.content=this.el.find(".content:first");this.all_content=c("#all_content");this.options_toggle=c("#options_toggle");this.go_back=this.el.find(".go_back");this.open_content_class="open_settings";this.templates={};var a=this;d.bind("closeModals",this.proxy(function(){a.toggleSettings(!1)}));d.bind("toggleSettings",this.proxy(this.toggleSettings));localStorage.getItem("use_compact")||localStorage.setItem("use_compact","false");config.webui?
(c('li a[data-content="directories"]').parent().hide(),c('li a[data-content="run_program"]').parent().hide()):c('li a[data-content="remote"]').parent().hide();client.raptor.api.post({action:"getversion"},{},function(a){console.log("get version",a);a.version.features.remote||c('li a[data-content="remote"]').parent().hide()},function(a){console.error("get version",a)});c('li a[data-content="about"]').parent().parent().hide()},bootStrapRemoteLoginField:function(){var a=this,b=c('input[name="webui.uconnect_username"]'),
e=c('input[name="webui.uconnect_password"]'),f=c('p[name="webui.uconnect_status"]'),g=c('a[name="webui.uconnect_connect"]'),d=c('input[name="webui.uconnect_enable"]');!1===d.prop("checked")&&(b.attr("disabled","disabled"),e.attr("disabled","disabled"),f.attr("disabled","disabled"),g.attr("disabled","disabled"));d.change(function(){!0===d.prop("checked")?(console.log("true"),b.removeAttr("disabled"),e.removeAttr("disabled"),f.removeAttr("disabled"),g.removeAttr("disabled")):(console.log("false"),a.showStatus(-2),
b.attr("disabled","disabled"),e.attr("disabled","disabled"),f.attr("disabled","disabled"),g.attr("disabled","disabled"))});b.keyup(function(){a.validateInputParamters(b.val(),128)?(f.text(""),g.removeAttr("disabled"),e.removeAttr("disabled")):(a.showStatus(6),g.attr("disabled","disabled"),e.attr("disabled","disabled"))});e.keyup(function(){a.validateInputParamters(e.val(),128)?(f.text(""),g.removeAttr("disabled"),b.removeAttr("disabled")):(a.showStatus(7),g.attr("disabled","disabled"),b.attr("disabled",
"disabled"))})},validateInputParamters:function(a,b){if(a.length>b)return!1;for(var e=0;e<a.length;++e)if(32>=a.charCodeAt(e)||126<a.charCodeAt(e))return!1;return!0},showStatus:function(a){var b=c('p[name="webui.uconnect_status"]'),e=c('a[name="webui.uconnect_connect"]'),f="black",g="";switch(a){case 1:f="green";g=locale("STATUS_REMOTE_01");e.attr("disabled","disabled");break;case 2:f="red";g=locale("STATUS_REMOTE_07");break;case 3:f="red";g="Peer block";break;case 4:f="red";g=locale("STATUS_REMOTE_05");
break;case 5:f="red";g="Security answer doesn't match";break;case 6:f="red";g=locale("STATUS_REMOTE_08");break;case 7:f="red";g=locale("STATUS_REMOTE_09");break;case 8:f="red";g="Another configuration attempt is in progress";break;case 9:f="red";g="Attempting to configure using authentication that doesn't support configuration";break;case 10:f="red";g="Can't register without enabling remote access";break;case -1:f="black";g=locale("STATUS_REMOTE_02");break;case -2:f="black";g=locale("STATUS_REMOTE_03");
break;case void 0:f="red";g=locale("STATUS_REMOTE_04");break;default:f="black",g=locale("STATUS_REMOTE_03")}b.css("color",f);b.text(g)},useWebUiSettings:function(){this.settings["webui._cookie.updateInterval"]&&d.trigger("setIntervals",this.settings["webui._cookie.updateInterval"].value);var a=localStorage.getItem("use_compact");c("#torrents").toggleClass("compact",a&&"false"!==a)},optionChanged:function(a){a=c(a.currentTarget);var b=a.attr("name"),e=this;if("local"==a.data("scope")){switch(a.attr("name")){case "multi_day_transfer_mode":var f,
b=["multi_day_transfer_mode_ul","multi_day_transfer_mode_dl","multi_day_transfer_mode_uldl"];f=["0"==a.val()?1:0,"1"==a.val()?1:0,"2"==a.val()?1:0];for(var g=0;g<b.length;g++)this.settings[b[g]].value=f[g];this.setSettings(b,f);break;case "use_compact":b=a.is(":checked"),localStorage.setItem("use_compact",""+b),c("#torrents").toggleClass("compact",b)}0<=a.attr("name").indexOf("webui.")&&(b=this.settings["webui.cookie"].value?JSON.parse(this.settings["webui.cookie"].value):null,f=a.attr("name"),f=
f.replace("webui._cookie.",""),a.is(":checkbox")?b[f]=a.is(":checked"):b[f]=a.val(),this.settings["webui._cookie."+f].value=""+b[f],this.settings["webui.cookie"].value=JSON.stringify(b),this.setSettings("webui.cookie",this.settings["webui.cookie"].value))}else"webui.lang"===b?(b=a.attr("value"),f=this.settings["webui.cookie"].value?JSON.parse(this.settings["webui.cookie"].value):null,f.lang=b,b=JSON.stringify(f),jQuery.cookie("locale",a.attr("value")),this.setSettings("webui.cookie",b,function(){document.location.reload(!0)})):
(a.is(":checkbox")?(value=a.is(":checked")?1:0,this.el.find('[data-depends="'+a.attr("id")+'"]').prop("disabled",!value),this.settings[b]&&(this.settings[b].value=""+!!value)):(value=a.val(),this.settings[b]&&(this.settings[b].value=value)),"webui.uconnect_connect"===b?(a=c('input[name="webui.uconnect_username"]').attr("value"),b=c('input[name="webui.uconnect_password"]').attr("value"),this.validateInputParamters(a,128)&&0!=a.length?this.validateInputParamters(b,128)&&0!=b.length?(this.showStatus(-1),
client.raptor.api.post({action:"configremote",u:a,p:b},null,function(a){e.showStatus(a.code)})):this.showStatus(7):this.showStatus(6)):this.settings[b]&&this.setSettings(b,value))},setSettings:function(a,b,e){if(_.isArray(a)){e="";for(var c=0;c<a.length;c++)e.length&&(e+="&"),e+="s="+a[c]+"&v="+b[c];client.raptor.api.post("action=setsetting&"+e)}else client.raptor.api.post({action:"setsetting",s:a,v:b},null,e)},returnMenu:function(){this.el.find(".settings_content").removeClass("done");this.el.removeClass("sub");
this.title_text_element.text(this.title_element.data("title"));var a=this;this.cleaner_timeout=setTimeout(function(){a.inner_menu_element.html("")},300);window.scrollability&&window.scrollability.scrollTo(this.content[0],0,0,0)},startTemplates:function(){_.isEmpty(this.templates)&&(this.templates={section:Handlebars.compile(c("#tmpl_options_section").html())})},toggleSettings:function(a){void 0!==a||this.active||d.trigger("closeModals");this.activate(a);this.all_content.toggleClass(this.open_content_class,
this.active);this.returnMenu()},emulateChange:function(a){c(a.currentTarget).trigger("click")},setCurrent:function(a){a.preventDefault();clearTimeout(this.cleaner_timeout);this.startTemplates();a=c(a.currentTarget);var b=this,e="",f=a.data("content"),g=[];if(config.webui)switch(f){case "general":g=["webui.lang","check_update"];break;case "ui_settings":g="use_compact confirm_when_deleting confirm_remove_tracker confirm_exit gui.alternate_color gui.speed_in_title gui.limits_in_statusbar".split(" ");
break;case "web_ui":g=["webui.enable"];break;case "remote":g=["webui.uconnect_password","webui.uconnect_status","webui.uconnect_connect","webui.uconnect_intro"]}_.each(window.options_map[f].contents,function(a){if(config.webui)for(var c=jQuery.extend(!0,{},a),f=0,d=c.elements.length;f<d;f++){var k=c.elements[f],k=k.combo_1?k.combo_1.name:k.checkbox_1||k.textbox_1||k.password_1||k.textarea_1||"notfound";void 0===b.settings[k]&&-1===g.indexOf(k)&&a.elements.splice(f,1)}e+=b.templates.section(a)});this.el.addClass("sub");
this.inner_menu_element.html(e);this.title_text_element.text(a.text());this.setValues(f);window.scrollability&&window.scrollability.scrollTo(this.content[0],0,0,0);"remote"===f&&b.bootStrapRemoteLoginField()},setValues:function(a){var b=this;c("select, input, textarea",this.inner_menu_element).each(function(){var a=c(this),f=b.settings[a.attr("name")];if("local"!=a.data("scope")||f)f&&(a.is(":checkbox")?a.prop("checked","true"==f.value||"1"==f.value):a.val(f.value),0===f.type&&a.addClass("number"));
else switch(a.attr("name")){case "use_compact":f=localStorage.getItem("use_compact");c("#use_compact").prop("checked",f&&"false"!=f).trigger("change");break;case "multi_day_transfer_mode":f="true"==b.settings.multi_day_transfer_mode_uldl.value?"2":"true"==b.settings.multi_day_transfer_mode_dl.value?"1":"0",c("#multi_day_transfer_mode").val(f)}a.data("depends")&&a.prop("disabled",!c('[name="'+a.data("depends")+'"]',this.inner_menu_element).is(":checked"))})},activate:function(a){this.active=void 0===
a?!this.all_content.hasClass(this.open_content_class):a;this.options_toggle.toggleClass("open",this.active);this.active&&this.loadAll()},loadAll:function(){this.first_load=!0;var a=this;client.raptor.api.post({action:"getsettings"},{},function(b){_.each(b.settings,function(b){a.settings[b[0]]={type:b[1],value:b[2],access:b[3].access};"webui.cookie"==b[0]&&(b=null!==b[2]?JSON.parse(b[2]):null,_.each(b,function(b,c){a.settings["webui."+c]={type:isNaN(b)?"true"==b&&"false"==b?1:2:0,value:""+b,access:"Y"}}))});
a.useWebUiSettings()},function(a){console.log(a)})}});window.options_map={general:{name:locale("ST_CAPT_GENERAL"),contents:{language:{title:locale("DLG_SETTINGS_1_GENERAL_01"),elements:[{control_combo:!0,label_1:locale("DLG_SETTINGS_1_GENERAL_01"),combo_1:{name:"webui.lang",contents:[{label:"English",value:"en"},{label:"Chinese(Simplified)",value:"zhCN"},{label:"Chinese(Traditional)",value:"zhTW"},{label:"Dutch",value:"nl"},{label:"French",value:"fr"},{label:"German",value:"de"},{label:"Italian",
value:"it"},{label:"Japanese",value:"ja"},{label:"Korean",value:"ko"},{label:"Portuguese",value:"pl"},{label:"Portuguese(Bazil)",value:"ptBR"},{label:"Russian",value:"ru"},{label:"Spanish",value:"es"}]}}]},privacy:{title:locale("DLG_SETTINGS_1_GENERAL_10"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_1_GENERAL_11"),checkbox_1:"check_update"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_1_GENERAL_12"),checkbox_1:"check_update_beta"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_1_GENERAL_13"),
checkbox_1:"anoninfo"}]},when_downloading:{title:locale("DLG_SETTINGS_1_GENERAL_17"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_1_GENERAL_18"),checkbox_1:"append_incomplete"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_1_GENERAL_19"),checkbox_1:"prealloc_space"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_1_GENERAL_20"),checkbox_1:"sys.prevent_standby"}]}}},ui_settings:{name:locale("ST_CAPT_UI_SETTINGS"),contents:{display_local:{elements:[{control_checkbox:!0,label_1:"Compact View",
checkbox_1:"use_compact",scope:"local"}]},display_options:{title:locale("DLG_SETTINGS_2_UI_01"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_02"),checkbox_1:"confirm_when_deleting"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_03"),checkbox_1:"confirm_remove_tracker"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_04"),checkbox_1:"confirm_exit"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_05"),checkbox_1:"gui.alternate_color"},{control_checkbox:!0,
label_1:locale("DLG_SETTINGS_2_UI_06"),checkbox_1:"gui.speed_in_title"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_07"),checkbox_1:"gui.limits_in_statusbar"}]},when_adding_torrents:{title:locale("DLG_SETTINGS_2_UI_15"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_16"),checkbox_1:"torrents_start_stopped"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_17"),checkbox_1:"activate_on_file"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_2_UI_18"),checkbox_1:"show_add_dialog"}]}}},
directories:{name:locale("ST_CAPT_FOLDER"),contents:{location_downloaded_files:{title:locale("DLG_SETTINGS_3_PATHS_01"),elements:[{control_checkbox_textbox:!0,checkbox_1:"dir_active_download_flag",label_1:locale("DLG_SETTINGS_3_PATHS_02"),textbox_1:"dir_active_download"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_3_PATHS_03"),checkbox_1:"always_show_add_dialog"},{control_checkbox_textbox:!0,checkbox_1:"dir_completed_download_flag",label_1:locale("DLG_SETTINGS_3_PATHS_06"),textbox_1:"dir_completed_download"},
{control_checkbox:!0,label_1:locale("DLG_SETTINGS_3_PATHS_07"),checkbox_1:"dir_add_label"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_3_PATHS_10"),checkbox_1:"move_if_defdir"}]},location_torrents:{title:locale("DLG_SETTINGS_3_PATHS_11"),elements:[{control_checkbox_textbox:!0,checkbox_1:"dir_torrent_files_flag",label_1:locale("DLG_SETTINGS_3_PATHS_12"),textbox_1:"dir_torrent_files"},{control_checkbox_textbox:!0,checkbox_1:"dir_completed_torrents_flag",label_1:locale("DLG_SETTINGS_3_PATHS_15"),
textbox_1:"dir_completed_torrents"},{control_checkbox_textbox:!0,checkbox_1:"dir_autoload_flag",label_1:locale("DLG_SETTINGS_3_PATHS_18"),textbox_1:"dir_autoload"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_3_PATHS_19"),checkbox_1:"dir_autoload_delete"}]}}},connection:{name:locale("ST_CAPT_CONNECTION"),contents:{listening_port:{title:locale("DLG_SETTINGS_4_CONN_01"),elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_02"),textbox_1:"bind_port"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_06"),
checkbox_1:"upnp"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_05"),checkbox_1:"rand_port_on_start"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_07"),checkbox_1:"natpmp"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_21"),checkbox_1:"disable_fw"}]},proxy_server:{title:locale("DLG_SETTINGS_4_CONN_08"),elements:[{control_combo:!0,label_1:locale("DLG_SETTINGS_4_CONN_09"),combo_1:{name:"proxy.type",contents:[{label:"(none)",value:"0"},{label:"Socks4",value:"1"},{label:"Socks5",
value:"2"},{label:"HTTPS",value:"3"},{label:"HTTP",value:"4"}]}},{control_textbox_large:!0,label_1:locale("DLG_SETTINGS_4_CONN_11"),checkbox_1:"proxy.proxy"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_13"),checkbox_1:"proxy.port"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_15"),checkbox_1:"proxy.auth"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_16"),checkbox_1:"proxy.username",depends:"proxy.auth"},{control_password:!0,label_1:locale("DLG_SETTINGS_4_CONN_18"),
checkbox_1:"proxy.password",depends:"proxy.auth"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_19"),checkbox_1:"proxy.resolve"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_20"),checkbox_1:"proxy.p2p"}]},proxy_privacy:{title:locale("DLG_SETTINGS_4_CONN_22"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_23"),checkbox_1:"no_local_dns"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_24"),checkbox_1:"private_ip"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_4_CONN_25"),
checkbox_1:"only_proxied_conns"}]}}},bandwidth:{name:locale("ST_CAPT_BANDWIDTH"),contents:{upload_rate_limiting:{title:locale("DLG_SETTINGS_5_BANDWIDTH_01"),elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_02"),textbox_1:"max_ul_rate"},{control_checkbox_textbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_05"),checkbox_1:"max_ul_rate_seed_flag",textbox_1:"max_ul_rate_seed"}]},download_rate_limiting:{title:locale("DLG_SETTINGS_5_BANDWIDTH_07"),elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_08"),
textbox_1:"max_dl_rate"}]},rate_limit:{title:locale("DLG_SETTINGS_5_BANDWIDTH_18"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_19"),checkbox_1:"net.calc_overhead"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_20"),checkbox_1:"net.ratelimit_utp"}]},number_connections:{title:locale("DLG_SETTINGS_5_BANDWIDTH_10"),elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_11"),textbox_1:"conns_globally"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_14"),
textbox_1:"conns_per_torrent"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_5_BANDWIDTH_15"),textbox_1:"ul_slots_per_torrent"}]}}},bittorrent:{name:locale("ST_CAPT_BITTORRENT"),contents:{basic_bt:{title:locale("DLG_SETTINGS_6_BITTORRENT_01"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_02"),checkbox_1:"dht"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_04"),checkbox_1:"dht_per_torrent"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_06"),
checkbox_1:"lsd"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_14"),checkbox_1:"enable_bw_management"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_03"),checkbox_1:"enable_scrape"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_05"),checkbox_1:"pex"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_07"),checkbox_1:"rate_limit_local_peers"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_15"),checkbox_1:"use_udp_trackers"},
{control_textbox_large:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_08"),textbox_1:"tracker_ip"}]},protocol_encryption:{title:locale("DLG_SETTINGS_6_BITTORRENT_10"),elements:[{control_combo:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_11"),combo_1:{name:"encryption_mode",contents:[{label:locale("ST_CBO_ENCRYPTIONS").split("||")[0],value:"0"},{label:locale("ST_CBO_ENCRYPTIONS").split("||")[1],value:"1"},{label:locale("ST_CBO_ENCRYPTIONS").split("||")[2],value:"2"}]}},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_6_BITTORRENT_13"),
checkbox_1:"encryption_allow_legacy"}]}}},transfer_cap:{name:locale("ST_CAPT_TRANSFER_CAP"),contents:{enable_transfer_cap:{elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_7_TRANSFERCAP_01"),checkbox_1:"multi_day_transfer_limit_en"}]},cap_settings:{title:locale("DLG_SETTINGS_7_TRANSFERCAP_02"),elements:[{control_combo:!0,label_1:locale("DLG_SETTINGS_7_TRANSFERCAP_03"),scope:"local",combo_1:{name:"multi_day_transfer_mode",contents:[{label:locale("ST_CBO_TCAP_MODES").split("||")[0],value:"0"},
{label:locale("ST_CBO_TCAP_MODES").split("||")[1],value:"1"},{label:locale("ST_CBO_TCAP_MODES").split("||")[2],value:"2"}]},depends:"multi_day_transfer_limit_en"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_7_TRANSFERCAP_04"),textbox_1:"multi_day_transfer_limit_value",depends:"multi_day_transfer_limit_en"},{control_combo:!0,label_1:locale("DLG_SETTINGS_7_TRANSFERCAP_04"),combo_1:{name:"multi_day_transfer_limit_unit",contents:[{label:"MB",value:"0"},{label:"GB",value:"1"}]},depends:"multi_day_transfer_limit_en"},
{control_combo:!0,label_1:locale("DLG_SETTINGS_7_TRANSFERCAP_05"),combo_1:{name:"multi_day_transfer_limit_span",contents:[{label:"1",value:"0"},{label:"2",value:"1"},{label:"5",value:"2"},{label:"7",value:"3"},{label:"10",value:"4"},{label:"14",value:"5"},{label:"15",value:"6"},{label:"20",value:"7"},{label:"21",value:"8"},{label:"28",value:"9"},{label:"30",value:"10"},{label:"31",value:"11"}]},depends:"multi_day_transfer_limit_en"}]}}},queuing:{name:locale("ST_CAPT_QUEUEING"),contents:{queue_settings:{title:locale("DLG_SETTINGS_8_QUEUEING_01"),
elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_8_QUEUEING_02"),textbox_1:"max_active_torrent"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_8_QUEUEING_04"),textbox_1:"max_active_downloads"}]},seed_while:{title:locale("DLG_SETTINGS_8_QUEUEING_06"),elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_8_QUEUEING_07"),textbox_1:"seed_ratio"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_8_QUEUEING_09"),textbox_1:"seed_time"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_8_QUEUEING_11"),
checkbox_1:"seeds_prioritized"}]},when_ut_reaches_seeding:{title:locale("DLG_SETTINGS_5_BANDWIDTH_18"),elements:[{control_checkbox_textbox:!0,label_1:locale("DLG_SETTINGS_8_QUEUEING_13"),checkbox_1:"seed_prio_limitul_flag",textbox_1:"seed_prio_limitul"}]}}},scheduler:{name:locale("ST_CAPT_SCHEDULER"),contents:{scheduler_settings:{title:locale("DLG_SETTINGS_9_SCHEDULER_04"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_9_SCHEDULER_01"),checkbox_1:"sched_enable"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_9_SCHEDULER_05"),
textbox_1:"sched_ul_rate"},{control_textbox:!0,label_1:locale("DLG_SETTINGS_9_SCHEDULER_07"),textbox_1:"sched_dl_rate"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_9_SCHEDULER_09"),checkbox_1:"sched_dis_dht"}]}}},remote:{name:locale("DLG_SETTINGS_D_REMOTE_01"),contents:{enable_remote:{elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_D_REMOTE_05"),checkbox_1:"webui.uconnect_enable"},{control_html:!0,textbox_1:"webui.uconnect_intro",html:'<p name="webui.uconnect_intro" style="font-weight: bold; color: #666;  word-wrap: break-word">BitTorrent Remote is a simple and secure web service that enables access to this BitTorrent client from anywhere on the internet. <br><br>Enable access here by creating a computer name and password, then access BitTorrent anytime from a PC or mobile web browser at remote.bittorrent.com or on your android phone with the BitTorrent Remote app</p>'}]},
status:{title:locale("STATUS_REMOTE_10"),elements:[{control_html:!0,textbox_1:"webui.uconnect_status",html:'<p name="webui.uconnect_status" style="min-height: 15px; word-wrap: break-word;"></p>'}]},authentication:{title:locale("DLG_SETTINGS_D_REMOTE_06"),elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_9_WEBUI_03"),textbox_1:"webui.uconnect_username"},{control_password:!0,label_1:locale("DLG_SETTINGS_9_WEBUI_05"),password_1:"webui.uconnect_password"}]},connect:{elements:[{control_button:!0,
label_1:locale("DLG_SETTINGS_D_REMOTE_09"),textbox_1:"webui.uconnect_connect"}]}}},web_ui:{name:locale("ST_CAPT_WEBUI"),contents:{enable_web_ui:{elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_9_WEBUI_01"),checkbox_1:"webui.enable"}]},authentication:{title:locale("DLG_SETTINGS_4_CONN_15"),elements:[{control_textbox:!0,label_1:locale("DLG_SETTINGS_9_WEBUI_03"),textbox_1:"webui.username"},{control_password:!0,label_1:locale("DLG_SETTINGS_9_WEBUI_05"),password_1:"webui.password"},{control_checkbox_textbox:!0,
label_1:locale("DLG_SETTINGS_9_WEBUI_07"),checkbox_1:"webui.enable_guest",textbox_1:"webui.guest"}]},connectivity:{title:locale("DLG_SETTINGS_9_WEBUI_09"),elements:[{control_checkbox_textbox:!0,label_1:locale("DLG_SETTINGS_9_WEBUI_10"),checkbox_1:"webui.enable_listen",textbox_1:"webui.port"},{control_textbox_large:!0,label_1:locale("DLG_SETTINGS_9_WEBUI_12"),textbox_1:"webui.restrict"}]},user_interface:{title:locale("ST_CAPT_UI_SETTINGS"),elements:[{control_checkbox:!0,label_1:locale("MM_OPTIONS_SHOW_TOOLBAR"),
checkbox_1:"webui._cookie.showToolbar",scope:"local"},{control_checkbox:!0,label_1:locale("MM_OPTIONS_SHOW_CATEGORY"),checkbox_1:"webui._cookie.showCategories",scope:"local"},{control_checkbox:!0,label_1:locale("MM_OPTIONS_SHOW_DETAIL"),checkbox_1:"webui._cookie.showDetails",scope:"local"},{control_checkbox:!0,label_1:locale("MM_OPTIONS_SHOW_STATUS"),checkbox_1:"webui._cookie.showStatusBar",scope:"local"},{control_textbox:!0,label_1:"Update GUI every(ms):",textbox_1:"webui._cookie.updateInterval",
scope:"local"},{control_textbox:!0,label_1:"Max. rows per page:",textbox_1:"webui._cookie.maxRows",scope:"local"},{control_checkbox:!0,label_1:"Use system fonts",checkbox_1:"webui._cookie.useSysFont",scope:"local"}]}}},ui_extras:{name:locale("ST_CAPT_UI_EXTRAS"),contents:{persistent_labels:{title:/(.+)\s\[/.exec(locale("DLG_SETTINGS_B_ADV_UI_07"))[1],elements:[{control_textbox_large:!0,label_1:/.+\[(.+)\]/.exec(locale("DLG_SETTINGS_B_ADV_UI_07"))[1],textbox_1:"gui.persistent_labels"}]},search_engines:{title:/(.+)\s\[/.exec(locale("DLG_SETTINGS_B_ADV_UI_08"))[1],
elements:[{control_textarea:!0,label_1:/.+\[(.+)\]/.exec(locale("DLG_SETTINGS_B_ADV_UI_08"))[1],textarea_1:"search_list"}]}}},disk_cache:{name:locale("ST_CAPT_DISK_CACHE"),contents:{basic_cache_settings:{title:locale("DLG_SETTINGS_C_ADV_CACHE_01"),elements:[{control_html:!0,html:"<p>"+locale("DLG_SETTINGS_C_ADV_CACHE_02")+"</p>"},{control_checkbox_textbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_03"),checkbox_1:"cache.override",textbox_1:"cache.override_size"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_05"),
checkbox_1:"cache.reduce"}]},advanced_cache_settings:{title:locale("DLG_SETTINGS_C_ADV_CACHE_06"),elements:[{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_07"),checkbox_1:"cache.write"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_08"),checkbox_1:"cache.writeout",depends:"cache.write"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_09"),checkbox_1:"cache.writeimm",depends:"cache.write"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_10"),
checkbox_1:"cache.read"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_11"),checkbox_1:"cache.read_turnoff",depends:"cache.read"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_12"),checkbox_1:"cache.read_prune",depends:"cache.read"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_13"),checkbox_1:"cache.read_thrash",depends:"cache.read"},{control_checkbox:!0,label_1:locale("DLG_SETTINGS_C_ADV_CACHE_14"),checkbox_1:"cache.disable_win_write"},{control_checkbox:!0,
label_1:locale("DLG_SETTINGS_C_ADV_CACHE_15"),checkbox_1:"cache.disable_win_read"}]}}},run_program:{name:locale("DLG_SETTINGS_C_ADV_RUN_01"),contents:{run_program:{title:locale("DLG_SETTINGS_C_ADV_RUN_01"),elements:[{control_textbox_large:!0,label_1:locale("DLG_SETTINGS_C_ADV_RUN_02"),textbox_1:"finish_cmd"},{control_textbox_large:!0,label_1:locale("DLG_SETTINGS_C_ADV_RUN_04"),textbox_1:"state_cmd"},{control_html:!0,html:"<p>You can use these commands:<br />%F - Name of downloaded file (for single file torrents)<br />%D - Directory where files are saved<br />%N - Title of torrent<br />%S - State of torrent<br />%L - Label<br />%T - Tracker<br />%M - Status message string (same as status column)<br />%I - hex encoded info-hash<br /><br />State is a combination of:<br />started = 1, checking = 2, start-after-check = 4,<br />checked = 8, error = 16, paused = 32, auto = 64, loaded = 128</p>"}]}}},
about:{name:"About",contents:{info:{title:"Information",elements:[{control_html:!0,html:"<p>Copyright &copy; "+(new Date).getFullYear()+"<br />BitTorrent Inc.<br />All Rights Reserved.</p><p>Remote Touch UI, Version: "+app_version+"</p>"},{control_html:1,html:'<p><a class="open_sessions">Click here to manage sessions.</a></p>'}]}}}}})(Spine,Spine.$);(function(d,c){PanelDynamic=d.Controller.create({init:function(){this.active=!1;this.template=Handlebars.compile(c(this.template).html());this.container=this.el.find(".content:first")},activate:function(){this.active=!0;this.el.removeClass("hidden");this.loadAll(!0)},deactivate:function(){this.active=!1;this.el.addClass("hidden");clearTimeout(this.updateInterval);this.model.deleteAll()},loadAll:function(a){if(this.active){this.model.deleteAll();a&&this.el.addClass("loading");var b=this;clearTimeout(this.updateInterval);
client.raptor.api.post({action:this.action,hash:window.App.getSelected()},{},function(a){var c;_.each(a[b.result_property][1],function(a,e){c=b.model.smartInit(a,e);c.save()});b.render();b.updateInterval=setTimeout(function(){b.loadAll()},b.interval);b.el.removeClass("loading")})}},render:function(){this.container.html(this.template({items:this.model.all()}))}});PlayerPanelDynamic=d.Controller.create({fail_status:{nostreamable:"<center>No streamable file or file not ready</center>"},supported_format:{audio:{mp3:1,
acc:1,wav:1,aif:1},video:{mov:1,mp4:1,m4v:1,"3gp":1}},template:"#tmpl_library",action:"getfiles",result_property:"files",active:!1,playing:!1,player_loaded:!1,events:{"tap .content li":"fileSelected","tap .content li a":"statusIconPressed"},init:function(){this.lastEventTimeStamp=this.player=null;this.container=this.el.find(".content");this.template=Handlebars.compile(c(this.template).html())},activate:function(){eventTracker.track("iOS Activate Player","Activate Player");this.active=!0;this.loadLibrary(!0);
this.el.removeClass("hidden");this.checkPlus(window.client.data.bt_user)},deactivate:function(){eventTracker.track("iOS Deactivate Player","Deactivate Player");this.renderDisplay("");this.active=!1;this.model.deleteAll();this.el.addClass("hidden").addClass("loading");this.player&&this.player.resetPlayer()},reactivate:function(){this.model.deleteAll();this.player&&this.player.resetPlayer();this.el.addClass("loading");this.loadLibrary(!0)},fileSelected:function(a){a=c(a.target).closest("li[data-id]");
a=c("li[data-id]").index(a);this.player.playSelected(a)},controlPlayer:function(a){if(this.player_loaded)switch(a=c(a.target),a.attr("id")){case "play_toggle":a.hasClass("pause")?this.player.play():a.hasClass("play")&&this.player.pause();break;case "play_next":this.player.playNext();break;case "play_previous":this.player.playPrevious()}else alert("player not load")},checkPlus:function(a){c.ajax({type:"GET",url:"/info?username="+a,dataType:"json",success:function(a){eventTracker.track("Mobile Plus",
"Streaming",{label:"Plus user - "+!!a.plus.proxy_files})}})},loadLibrary:function(a){if(this.active){var b=this;b.model.deleteAll();client.raptor.api.post({action:this.action,hash:window.App.getSelected()},{},function(a){var f;_.each(a[b.result_property][1],function(a,c){a[6]&&(f=b.model.smartInit(a,c),f.save())});a=b.getStreamableFiles(b.model.recordsValues());a.length?(c(".controls").show(),b.renderDisplay(b.template({items:a})),b.player=b.loadPlayer(a)):(c(".controls").hide(),b.renderDisplay(b.fail_status.nostreamable));
b.el.removeClass("loading")})}},loadPlayer:function(a){a.length||alert("No media files");var b=-1,e=this,f=!1,d=!1,h,l=function(a,b){var e=c("#"+a)[0];e||(e=document.createElement("audio"),e.id=a,e.style.position="absolute",e.style.top="100%",c(b).prepend(e));return e},n=function(a,b){var e=c("#"+a)[0];e||(e=document.createElement("video"),e.id=a,e.style.position="absolute",e.style.top="100%",c(b).prepend(e));return e},p=function(f){if(a&&!(0>f||f>a.length-1))if(b===f)e.playing?m():q();else{r();var d=
c(".content li.connecting"),g=c(".content li.playing"),k=c(".content li.paused"),l=c(".container .content ul");d.removeClass("connecting");g.removeClass("playing");k.removeClass("paused");d=0;for(g=l.children().length;d<g;++d)k=c(l.children()[d]),f==d?(k.addClass("connecting"),k.addClass("current")):k.removeClass("current");b=f;h.src=a[b].stream_link;m();q()}},k=function(){a&&b!==a.length-1?p((b+1)%a.length):m()},m=function(){if(e.playing){var a=c(".content li.current"),b=c("#play_toggle");a.removeClass("playing");
a.hasClass("connecting")||a.addClass("paused");h.pause();e.playing=!1;b.removeClass("play").addClass("pause")}},q=function(){h.src||p(0);h.play()},r=function(){e.playing&&m();h.removeAttribute("src");var a=c(".gutter #loading"),b=c("#timeleft");a.css({width:"0%"});b.text("-0:00")};switch(this.media_type){case "audio":h=l("audio_player",".audio");break;case "video":h=n("video_player",".video")}c(h).bind("playing",function(a){if(!e.playing){a=c(".content li.current");var b=c("#play_toggle");e.playing=
!0;"video"!=e.media_type||c("#video_player")[0].webkitDisplayingFullscreen||c("#video_player")[0].webkitEnterFullScreen();b.removeClass("pause").addClass("play");a.removeClass("paused").addClass("playing");a.hasClass("connecting")&&a.removeClass("connecting")}});c(h).bind("ended",function(){m();k()});c(h).bind("timeupdate",function(){var a=c(".gutter #loading"),b=c("#timeleft"),e=parseInt(h.duration-h.currentTime,10),k=100*(h.currentTime/h.duration),l=Math.floor(e/60,10),e=e-60*l;isNaN(l)||isNaN(e)||
b.text("-"+l+":"+(9<e?e:"0"+e));f||a.css({width:k+"%"});d||(d=!0,c(".gutter").slider({value:0,step:0.01,orientation:"horizontal",range:"min",max:h.duration,animate:!0,slide:function(){f=!0},stop:function(a,b){f=!1;h.currentTime=b.value}}))});c(h).bind("loadeddata",function(){c(".audio li.connecting").removeClass("connecting");if(e.lastEventTimeStamp){var a=Math.round(((new Date).getTime()-e.lastEventTimeStamp)/1E3),a=15>a?"< 15 s":15<=a&&60>a?"< 1 m":60<=a&&120>a?"< 2 m":120<=a&&180>a?"< 3 m":180<=
a&&300>a?"< 5 m":"> 5 m";eventTracker.track("iOS Media Player","On LoadTimimg",{label:"Loaded - "+e.media_type+" - "+a});console.log("Loading - "+e.media_type+" - "+a)}});c(h).bind("webkitendfullscreen",function(){m()});c(h).bind("loadstart",function(){e.lastEventTimeStamp=(new Date).getTime();eventTracker.track("iOS Media Player","On LoadStart",{label:"Load - "+e.media_type})});this.player_loaded=!0;return{playNext:k,playPrevious:function(){!a||0>=b?m():p((b-1)%a.length)},playSelected:p,play:q,pause:m,
resetPlayer:r}},statusIconPressed:function(a){a.preventDefault()},getStreamableFiles:function(a){var b,c,f,d=this.supported_format[this.media_type];f=[];b=0;for(c=a.length;b<c;++b){var h=a[b],l=h.name.slice(-3);h.streamable&&(h.playable&&d[l])&&f.push(h.clone())}return f},renderDisplay:function(a){this.el_display.html(a)}});window.Files=PanelDynamic.create();window.Peers=PanelDynamic.create();window.Speed=d.Controller.create({el:c("#subpanel_speed"),canvas:c("#speed_canvas"),init:function(){this.plot_options=
{colors:["#009900","#1C8DFF"],series:{shadowSize:0},yaxis:{min:0,minTickSize:5120,tickFormatter:function(a,b){return App.parseBytes(a)+"/s"}},xaxis:{mode:"time",timeformat:"%H:%M:%S"}}},activate:function(){this.active=!0;this.el.removeClass("hidden");if(c.plot)this.loadPlot();else{var a=this;this.el.addClass("loading");$LAB.script("js/vendor/jquery.flot.min.js").wait(function(){c(a.el).removeClass("loading");a.loadPlot()})}},loadPlot:function(){var a=new Date,a=a.getTime()-6E4*a.getTimezoneOffset();
this.plot=c.plot(this.canvas,[{label:"down speed",data:[[a,0]]},{label:"up speed",data:[[a,0]]}],this.plot_options);this.updateCanvas()},deactivate:function(){this.active=!1;this.el.addClass("hidden");this.plot&&this.plot.shutdown();this.plot=null},updateCanvas:function(a){if(this.active){a=a?a:[];var b=[],c=[];480>=screen.width&&(a=_.last(a,8));_.each(a,function(a){b.push([a.time,a.up]);c.push([a.time,a.down])});this.plot.resize();this.plot.setData([{label:"down speed",data:c},{label:"up speed",
data:b}]);this.plot.setupGrid();this.plot.draw()}}});window.Info=d.Controller.create({el:c("#subpanel_info")});window.Audio=PlayerPanelDynamic.create();window.Video=PlayerPanelDynamic.create();window.Panels=d.ControllerWithManager.create({events:{"tap .tabs a":"toggleOpen","click #close_panels":"close","tap .panel header li a":"changePaneContent","tap .priority li":"setPriority","change .checkbox":"setDownload","tap .controls li":"controlPlayer"},controlPlayer:function(a){a.preventDefault();switch(c(".media_player li .current").attr("href").replace("#subpanel_",
"")){case "audio":this.audio.controlPlayer(a);break;case "video":this.video.controlPlayer(a)}},init:function(){d.bind("updatePanel",this.proxy(this.updatePanel));d.bind("updatePlayer",this.proxy(this.updatePlayer));this.audio=Audio.init({el:c("#subpanel_audio"),media_type:"audio",model:window.File,el_display:c(".audio .content")});this.video=Video.init({el:c("#subpanel_video"),media_type:"video",model:window.File,el_display:c(".video .content")});this.files=Files.init({el:c("#subpanel_files"),template:"#tmpl_subpanel_files",
action:"getfiles",result_property:"files",model:window.File,interval:6E3,active:!1});this.peers=Peers.init({el:c("#subpanel_peers"),template:"#tmpl_subpanel_peers",action:"getpeers",result_property:"peers",model:window.Peer,interval:6E3,active:!1});d.bind("closePanels",this.proxy(this.close));this.speed=Speed.init({active:!1});this.info=Info.init({active:!1});d.bind("setIntervals",this.proxy(this.setIntervals));this.info_template=Handlebars.compile(c("#tmpl_subpanel_info").html());this.manage("files",
"info","peers","speed","video","audio")},setIntervals:function(a){this.peers.interval=2*a;this.files.interval=2*a},setDownload:function(a){var b=c(a.target);a=b.closest("li[data-id]");var e=a.find(".priority:first"),b=1==b.attr("data-value")?File.priorities.indexOf("normal"):0;e.removeClass("low normal high");b&&e.addClass("normal");this.setFilePriority(a.data("id"),b)},setPriority:function(a){var b=c(a.target),e=b.closest("li[data-id]");a=e.find(".priority:first");e=e.find(".checkbox:first");b=b.attr("class");
e.attr("data-value",1);a.removeClass("low normal high").addClass(b);this.setFilePriority(a.closest("li").data("id"),File.priorities.indexOf(b))},setFilePriority:function(a,b){client.raptor.api.post({action:"setprio",f:a,p:b,hash:App.getSelected()},{hash:App.getSelected()})},changePaneContent:function(a){a.preventDefault();a=c(a.currentTarget);var b=a.attr("href");a.closest("ul").find(".current").removeClass("current");a.addClass("current");this.activateController(b.replace("#subpanel_",""))},updatePanel:function(a,
b){c("#subpanel_info").find(".content").html(this.info_template(a));this.speed.updateCanvas(a._speed_history);b&&(this.files.loadAll(!0),this.peers.loadAll(!0))},updatePlayer:function(a,b){b&&(this.audio.reactivate(),this.video.reactivate(),this.audio.loadLibrary(!0),this.video.loadLibrary(!0))},close:function(){c("#torrents").removeClass("panel_open");c(this.el).removeClass("open");c(".tabs a",this.el).removeClass("current");this.deactivateAll()},toggleOpen:function(a){a.preventDefault();a=c(a.currentTarget);
var b=a.attr("data-content");a.hasClass("current")?this.close():(c(this.el).find(".panel").addClass("hidden").filter("."+a.data("content")).removeClass("hidden"),c(".tabs a",this.el).removeClass("current"),!c(this.el).hasClass("open")&&c(this.el).find(".current").length&&(c("#torrents").addClass("panel_open"),c(this.el).addClass("open")),"torrent_info"===b?c(".torrent_info header .current",this.el).trigger("tap"):"media_player"===b&&c(".media_player header .current",this.el).trigger("tap"),c(this.el).hasClass("open")&&
a.addClass("current"))}})})(Spine,Spine.$);(function(d,c){window.Feeds=d.Controller.create({events:{"tap .download":"download"},interval:2E3,init:function(){this.content=this.el.find(".content:first");this.template=Handlebars.compile(c("#tmpl_feeds").html());this.sb_feeds_template=Handlebars.compile(c("#tmpl_label_feed").html());this.sb_feeds_container=c("#sidebar").find(".feeds > ul:first");d.bind("processFeeds",this.proxy(this.processFeeds));d.bind("filterFeeds",this.proxy(this.filterFeeds))},download:function(a){a.preventDefault();var b=
c(a.currentTarget);a=b.closest(".feedtorrent").data("feed");b.addClass("loading");b.html("");client.raptor.api.post({action:b.data("action"),feedid:a},{s:b.data("url")},function(){b.addClass("added");b.text("Sent");b.closest(".controls").addClass("in_history");b.removeClass("loading")})},filterFeeds:function(a){var b;0>a?b=this.el.find(".feedtorrent"):(a="_last"==a&&this.last_feed_id?this.last_feed_id:a,b=this.el.find('.feedtorrent[data-feed="'+a+'"]'),this.el.find('.feedtorrent:not([data-feed="'+
a+'"])').addClass("hidden"));b.removeClass("hidden");this.el.find(".list_message").toggleClass("hidden",0<b.length);window.scrollability&&window.scrollability.scrollTo(this.content[0],0,0,0);this.last_feed_id=a},processFeeds:function(a,b){this.addFeeds(a||[]);this.deleteFeeds(b||[]);(a&&a.length||b&&b.length)&&this.render()},addFeeds:function(a){var b;_.each(a,function(a){if(Feed.exists(a[0])){var c=FeedTorrent.findAllByAttribute("feed_id",a[0]);_.each(c,function(a){FeedTorrent.destroy(a.id)});Feed.smartUpdate(a[0],
a)}else b=Feed.smartInit(a),b.save()})},deleteFeeds:function(a){_.each(a,function(a){Feed.destroy(a)})},render:function(){var a=this.sb_feeds_template({items:{no_feed:!0,id:-1}}),b=c(".current",this.sb_feeds_container);Feed.each(function(a){a.updateAttribute("_current",b.length&&b.data("feed")==a.id)});this.sb_feeds_container.html(a+this.sb_feeds_template({items:Feed.all()}));this.content.html(this.template({items:FeedTorrent.all()}));this.filterFeeds("_last")}})})(Spine,$);(function(d,c){window.Sidebar=d.Controller.create({events:{"tap li a":"setCurrent","tap .torrents a":"torrentView","tap .labels a":"filterLabel","tap .feed a":"showFeed","tap .apps a":"showApp","tap section h2.collapsable":"collapseSection"},init:function(){this.torrents=c("#torrents");this.torrents_container=this.torrents.find(".content:first");this.el_footer=c("#sidebar_footer");this.popover_element=c(".popover",this.el_footer);this.adder_title=this.el_footer.find(".title");null!==localStorage.getItem("sections")?
this.settings=JSON.parse(localStorage.getItem("sections")):this.settings=null;this.popover_element.find("> a").bind("tap",this.proxy(this.popover));this.popover_element.find(".go_back").bind("click",this.proxy(this.returnMenu));this.popover_element.find("ul a").bind("tap",this.proxy(this.showAdder));this.popover_element.find("form").bind("submit",this.proxy(this.addUrl));var a=this;d.bind("closeModals",this.proxy(function(){a.togglePopover(!1)}));this.settings?(a=this,_.each(this.settings,function(b,
c){a.el.find("section."+c).addClass(b.collapsed?"collapsed":"")})):(localStorage.setItem("sections",JSON.stringify({torrents:{collapsed:!1},labels:{collapsed:!1},feeds:{collapsed:!1},apps:{collapsed:!1}})),null!==localStorage.getItem("sections")?this.settings=JSON.parse(localStorage.getItem("sections")):this.settings=null)},returnMenu:function(a){c(".go_back",this.el_footer).addClass("hidden");c(".options",this.el_footer).removeClass("extra");this.adder_title.text(this.adder_title.data("title"))},
showAdder:function(a){a.preventDefault();a=c(a.currentTarget);c(".go_back",this.el_footer).removeClass("hidden");this.adder_title.text(a.data("title"));c(".options",this.el_footer).addClass("extra");c(".extra_options",this.el_footer).children(".option").addClass("hidden").filter("."+a.data("target")).removeClass("hidden").focus()},popover:function(a){a.preventDefault();this.popover_element.hasClass("open")||d.trigger("closeModals");this.togglePopover()},togglePopover:function(a){this.returnMenu();
this.popover_element.toggleClass("open",a)},addUrl:function(a){a.preventDefault();a=c(a.currentTarget).find("button:first");var b=c("#"+a.data("url-element")),e=b.val(),f=this,d=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)\.([a-z\.]{2,6})(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,h=/magnet:.+/;e&&(d.test(e)||h.test(e))?client.raptor.api.post({action:a.data("action")},{url:e},function(){f.popover_element.removeClass("open");f.el_footer.find(".extra").removeClass("extra");b.val("")},function(a){alert("Torrent not found. Please check your URL");
b.focus()}):(alert("You need to insert a valid URL"),b.focus())},setCurrent:function(a){c("#body").removeClass("showmenu");c(a.currentTarget).closest("#sidebar").find(".current").removeClass("current");c(a.currentTarget).addClass("current")},collapseSection:function(a){a=c(a.currentTarget).closest("section");a.toggleClass("collapsed");this.settings[a.data("section")].collapsed=a.hasClass("collapsed");localStorage.setItem("sections",JSON.stringify(this.settings))},torrentView:function(a){a.preventDefault();
a=c(a.currentTarget).data("show");d.trigger("filterTorrents",".torrent:not("+a+")",a,!0);d.trigger("activateController","torrents")},filterLabel:function(a){a.preventDefault();a=c(a.currentTarget).data("label");d.trigger("filterTorrents",".torrent:not([data-label='"+a+"'])",!0);d.trigger("activateController","torrents")},showFeed:function(a){a.preventDefault();d.trigger("activateController","feeds");d.trigger("filterFeeds",c(a.currentTarget).data("feed"))},showApp:function(a){a.preventDefault()}})})(Spine,
Spine.$);(function(d,c){window.Torrent=d.Model.setup("Torrent","id status name size percent downloaded uploaded ratio up_speed down_speed eta label peers_connected peers_swarm seeds_connected seeds_swarm availability queue_position remaining download_url rss_feed_url message stream_id added_on completed_on app_update_url directory webseed_enabled _status_byline _compact_byline _torrent_class _speed_history".split(" "));window.Torrent.extend({bits:"started;checking;start after check;checked;error;paused;queued;loaded".split(";"),
max_speed_history:25,speed_history:[],smartInit:function(a){a=this.processAttributes(a);480>=screen.width&&(this.max_speed_history=5);return this.init(a)},processAttributes:function(a){var b={},c=0;_.each(this.attributes,function(f){b[f]=a[c++]||void 0});return b=this.processData(b)},processData:function(a){a.ratio=a.ratio?(a.ratio/1E3).toFixed(2):0;a.percent=a.percent?a.percent/10:0;a.peers_connected=a.peers_connected?a.peers_connected:0;a.seeds_connected=a.seeds_connected?a.seeds_connected:0;a.availability=
(a.availability/65535).toFixed(2);a._speed_history=this.speedHistory(a.id,a.up_speed,a.down_speed);a.statuses=this.mapStatuses(a.status);return a=this.processStatus(a)},speedHistory:function(a,b,c){var f=new Date,f=f.getTime()-6E4*f.getTimezoneOffset();if(!this.speed_history[a]){this.speed_history[a]=[];var d=f-1E3*this.max_speed_history;for(i=0;i++<this.max_speed_history;)this.speed_history[a].push({up:null,down:null,time:d+1E3*i})}this.speed_history[a].push({up:b||0,down:c||0,time:f});this.speed_history[a].length>
this.max_speed_history&&this.speed_history[a].shift();return this.speed_history[a]},mapStatuses:function(a){var b=[];_.map(this.bits,function(c,f){Math.pow(2,f)&a&&b.push(c)});return b},processStatus:function(a){var b=100<=a.percent,c=a.percent,f=!_.contains(a.statuses,"queued")&&_.contains(a.statuses,"started"),d,h;_.contains(a.statuses,"paused")&&(d=locale("OV_FL_PAUSED"),h="paused");_.contains(a.statuses,"checking")&&(d=locale("OV_FL_CHECKED").replace(/%:\.1d%/,(c/10).toFixed(1))+"%",h="checking waiting");
!d&&b?_.contains(a.statuses,"queued")?_.contains(a.statuses,"started")?(d=locale("OV_FL_SEEDING")+" "+(a.peers_connected||0)+" "+locale("OV_COL_PEERS"),d+=" - U: "+App.parseBytes(a.up_speed)+"/s",d+=locale("OV_COL_ETA")+" "+App.secondsToString(a.eta),h="seeding"):(d=locale("OV_FL_QUEUED_SEED"),h="seeding waiting"):(d=locale("OV_FL_FINISHED"),h="done"):d||(_.contains(a.statuses,"queued")&&!_.contains(a.statuses,"started")?(d=locale("OV_FL_QUEUED")+"position: "+a.queue_position,h="waiting"):_.contains(a.statuses,
"queued")||_.contains(a.statuses,"started")?(d=(f?"[F] ":"")+(locale("OV_FL_DOWNLOADING")+" "+(a.seeds_connected||0)+" "+locale("OV_COL_PEERS")),d+=" - D: "+App.parseBytes(a.down_speed)+"/s U: "+App.parseBytes(a.up_speed)+"/s",d+=locale("OV_COL_ETA")+" "+App.secondsToString(a.eta),h="downloading"):(d=locale("OV_FL_STOPPED")+" "+c/10+"%",h="stopped"));b=d.split(" - ");a._torrent_class=h;a._status_byline=d;a._compact_byline=1<b.length?b[1]:d;return a}})})(Spine,Spine.$);(function(d,c){window.File=d.Model.setup("File","name size downloaded priority first_piece num_pieces streamable encoded_rate duration width height stream_eta streamability _checkbox_value _priority_class _percent torrent stream_link playable".split(" "));window.File.extend({priorities:["none","low","normal","high"],smartInit:function(a,b){var c={},d=0;_.each(this.attributes,function(b){c[b]=a[d++]});c.id=""+b;c.torrent=Torrent.find(window.App.getSelected());c._priority_class=this.priorities[c.priority];
c._checkbox_value=0<c.priority?1:0;c._percent=(100*(c.downloaded/c.size)).toFixed(0);c.streamable&&(c.stream_link=this.getLink(c.id,c.name),c.playable="100"===c._percent?!0:!1);return this.init(c)},getLink:function(a,b){var e=this.recordsValues()[a],d;console.log("config",config);config&&config.webui?(d={sid:Torrent.find(window.App.getSelected()).stream_id,file:a,service:"DOWNLOAD",qos:0,disposition:"inline"},e="/proxy"):(d={sid:Torrent.find(window.App.getSelected()).stream_id,file:a,service:"DOWNLOAD",
qos:0,disposition:"inline",GUID:c.cookie("GUID"),bt_talon_tkt:c.cookie("bt_talon_tkt")},e="/client/proxy/"+(escape(b)||escape(e.name)));return e+"?"+c.param(d)}})})(Spine,Spine.$);(function(d,c){window.Peer=d.Model.setup("Peer","country ip hostname protocol port client flags complete down_speed up_speed pending requests waited uploaded downloaded hasherr peer_download_rate maxup maxdown queued inactive relevance".split(" "));window.Peer.extend({smartInit:function(a,b){var c={},d=0;c.id=b;_.each(this.attributes,function(b){c[b]=a[d++]});c.complete/=10;return this.init(c)}})})(Spine,Spine.$);(function(d,c){window.Feed=d.Model.setup("Feed","id enabled usefeedtitle user_selected programmed download_state url next_update items _count _show_count _name _url _current".split(" "));window.Feed.extend({smartInit:function(a){a=this.processAttributes(a);return this.init(a)},smartUpdate:function(a,b){var c=this.processAttributes(b);return this.update(a,c)},processAttributes:function(a){var b={},c=0;_.each(this.attributes,function(d){b[d]=a[c++]||void 0});return b=this.processData(b)},processData:function(a){a._count=
a.items.length;a._show_count=!!a._count;var b=a.url.split("|");a._url=b[1];a._name=b[0];var c;_.each(a.items,function(a){c=FeedTorrent.smartInit(a);c.save()});return a}})})(Spine,Spine.$);(function(d,c){window.FeedTorrent=d.Model.setup("Feed","name name_full url quality codec timestamp season episode episode_to feed_id repack in_history torrent".split(" "));window.FeedTorrent.extend({smartInit:function(a){a=this.processAttributes(a);return this.init(a)},processAttributes:function(a){var b={},c=0;_.each(this.attributes,function(d){b[d]=a[c++]||void 0});return b=this.processData(b)},processData:function(a){return a}})})(Spine,Spine.$);(function(d,c){c("#body").removeClass("waiting");c(".app_version").text(app_version);setTimeout(function(){c("#waiting_logo, #waiting_loader").remove()},300);c.support.touch||c(".scrollable").removeClass("scrollable").parent().addClass("scrollable desktop");c(".checkbox").live("tap",function(){c(this).attr("data-value",1==c(this).attr("data-value")?0:1);c(this).trigger("change")});(0<window.location.href.indexOf("bittorrent.com")||0<window.location.href.indexOf("bittorrent"))&&c("#bt_branding").attr("rel",
"stylesheet");window.uTorrentApp=d.ControllerWithManager.create({el:"body",events:{"tap .popover, #options, #options_toggle":"stopPropagation"},elements:{"#sidebar":"sidebar_element","#torrents":"torrents_element","#feeds":"feeds_element","#panels":"panel_element","#controls_main":"controls_element","#options":"settings_element"},stopPropagation:function(a){a.stopImmediatePropagation()},init:function(){this.token_tries=3;this.url="/gui/";window.clients=new ClientManager;clients.sync();if(config&&
config.webui){var a=new Client;clients.add(a)}clients.set_current_client();this.client=clients.get_current_client();config&&!config.webui?this.client?c(".current_user").text(this.client.data.bt_user):this.logoutUser("Please log in"):c("#user").remove();this.torrents=Torrents.init({el:this.torrents_element,active:!0});this.feeds=Feeds.init({el:this.feeds_element,active:!1});this.settings=Settings.init({el:this.settings_element});this.sidebar=Sidebar.init({el:this.sidebar_element});this.panels=Panels.init({el:this.panel_element});
this.controls=Controls.init({el:this.controls_element});d.bind("activateController",this.proxy(this.activateController));d.bind("logoutUser",this.proxy(this.logoutUser));this.manage("torrents","feeds");this.activateController("torrents");Handlebars.registerHelper("parseBytes",function(a){return App.parseBytes(a)});Handlebars.registerHelper("secondsToDate",function(a){return App.secondsToDate(a)});Handlebars.registerHelper("relativeDate",function(a){a=(new Date).getTime()/1E3-a;return App.secondsToString(a)});
Handlebars.registerHelper("secondsToString",function(a){return App.secondsToString(a)});this.loadToken();c(window).bind("orientationchange",function(){d.trigger("closeModals")});this.el.bind("tap",function(){d.trigger("closeModals")});this.el.on("tap",".open_sessions",this.openSessions);this.loadString("text","ST_CAPT_GENERAL;ST_CAPT_UI_SETTINGS;ST_CAPT_FOLDER;ST_CAPT_CONNECTION;ST_CAPT_BANDWIDTH;ST_CAPT_BITTORRENT;ST_CAPT_TRANSFER_CAP;ST_CAPT_QUEUEING;ST_CAPT_SCHEDULER;ST_CAPT_WEBUI;ST_CAPT_ADVANCED;ST_CAPT_UI_EXTRAS;ST_CAPT_DISK_CACHE;ST_CAPT_RUN_PROGRAM;DLG_SETTINGS_D_REMOTE_01;MM_OPTIONS;STM_TORRENTS;OV_CAT_ALL;OV_FL_DOWNLOADING;OV_FL_SEEDING;OV_CAT_COMPL;Paste a torrent or feed URL;Feeds;OV_CAT_NOLABEL;ML_LABEL;logout;OV_COL_SHARED;OV_NEWLABEL_TEXT".split(";"))},
logoutUser:function(a){a=(a=a||"Logged out successfully from remote.","/talon/logout?message="+encodeURIComponent(a));window.top?window.top.location=a:window.location=a},getSelected:function(){return this.torrents.current},openSessions:function(){var a=decode_location_params(),a=a&&a.sessions?"?sessions="+encodeURIComponent(a.sessions):"";window.open("/talon/sessions"+a)},loadToken:function(){var a=this;this.token_tries--;client.raptor.api.get_token(function(){c(document).data("token",client.raptor.api.token);
!a.torrents.first_load&&a.torrents.loadAll();!a.settings.first_load&&a.settings.loadAll()},function(b){console.log(b);0==a.token_tries?a.logoutUser("An error occurred, please log in again."):a.loadToken()})},parseBytes:function(a,b){var c;if(0>=a||!a)return"0 b";c=Math.floor(Math.log(a)/Math.log(1024));a/=Math.pow(1024,c);rounded=Math.round(100*a)/100;return rounded+" "+"b kB MB GB TB PB EB ZB YB".split(" ")[c]},secondsToDate:function(a){if(!a)return"n/a";a=new Date(1E3*a);return a.getDate()+"/"+
a.getMonth()+"/"+a.getFullYear()},secondsToString:function(a,b){if(-1==a||!a)return"\u221e";var c=Number(a);if(63072E3<c)return b?"":"\u221e";var d,g,h,l,n;g="";g=Math.floor(c/31536E3);d=c%31536E3;c=Math.floor(d/604800);d%=604800;h=Math.floor(d/86400);d%=86400;l=Math.floor(d/3600);d%=3600;n=Math.floor(d/60);d%=60;return g=0<g?"%dy %dw".replace(/%d/,g).replace(/%d/,c):0<c?"%dw %dd".replace(/%d/,c).replace(/%d/,h):0<h?"%dd %dh".replace(/%d/,h).replace(/%d/,l):0<l?"%dh %dm".replace(/%d/,l).replace(/%d/,
n):0<n?"%dm %ds".replace(/%d/,n).replace(/%d/,d):"%ds".replace(/%d/,d)},loadString:function(a,b){var d;switch(a){case "value":d=function(a,b){c('[label="'+b+'"]').val(locale(b))};break;case "text":d=function(a,b){c('[label="'+b+'"]').text(locale(b))};break;default:d=function(a,b){c('[label="'+b+'"]').text(locale(b))}}c.each(b,function(a,b){d(a,b)})}})})(Spine,Spine.$);$(function(){window.App=uTorrentApp.init()});var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-24534567-1"]);_gaq.push(["_trackPageview"]);var getUserDevice=function(){for(var d=navigator.userAgent.toLowerCase(),c="blackberry;windows phone;iphone;android;ipad;kindle;bb10;silk".split(";"),a,b=0,e=c.length;b<e;++b)if(a=c[b],-1!==d.indexOf(a))return a;return"other"};_gaq.push(["_trackEvent","Login","LoginWebApp","LoginWebApp - "+getUserDevice()]);
window.navigator.standalone&&_gaq.push(["_trackEvent","Login","LoginWebApp","LoginWebApp - standalone - "+getUserDevice()]);(function(){var d=document.createElement("script");d.type="text/javascript";d.async=!0;d.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,c)})();var mpq=[];mpq.push(["init","929fd923f3c813bb4e25f7bb4ac85105"]);(function(){var d=document.createElement("script");d.type="text/javascript";d.async=!0;d.src=("https:"==document.location.protocol?"https:":"http:")+"//api.mixpanel.com/site_media/js/api/mixpanel.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(d,c)})();
